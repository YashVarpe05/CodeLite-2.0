import React, { useState, useEffect } from "react";

const CountdownSection = () => {
	const [timeLeft, setTimeLeft] = useState({
		days: 0,
		hours: 0,
		minutes: 0,
		seconds: 0,
	});

	useEffect(() => {
		// Target date: February 7, 2026
		const targetDate = new Date("2026-02-07T00:00:00").getTime();

		const updateCountdown = () => {
			const now = new Date().getTime();
			const difference = targetDate - now;

			if (difference > 0) {
				const days = Math.floor(difference / (1000 * 60 * 60 * 24));
				const hours = Math.floor(
					(difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
				);
				const minutes = Math.floor(
					(difference % (1000 * 60 * 60)) / (1000 * 60)
				);
				const seconds = Math.floor((difference % (1000 * 60)) / 1000);

				setTimeLeft({ days, hours, minutes, seconds });
			} else {
				setTimeLeft({ days: 0, hours: 0, minutes: 0, seconds: 0 });
			}
		};

		// Update immediately
		updateCountdown();

		// Update every second
		const interval = setInterval(updateCountdown, 1000);

		// Cleanup interval on component unmount
		return () => clearInterval(interval);
	}, []);

	const formatNumber = (num) => {
		return num.toString().padStart(2, "0");
	};

	return (
		<section>
			<div className="bg-grid-2 text-gray-1 mb-[4.5rem] bg-[size:250%] bg-[position:50%_-10%] bg-no-repeat py-4 text-center md:bg-cover md:bg-[position:50%_80%] md:pt-8">
				<div className="font-nb-architekt mb-8 flex items-center justify-center gap-4 text-center text-5xl uppercase md:mb-12 md:gap-12">
					<div>
						<p className="flex flex-col items-center">
							{formatNumber(timeLeft.days)}
							<br />
							<span className="text-gray-2 text-base">days</span>
						</p>
					</div>
					<div>
						<div className="hidden -translate-y-2 md:block w-fit">
							<svg
								width="73"
								height="72"
								viewBox="0 0 73 72"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8183 56.0769L53.869 54.164C55.8615 52.1336 57.5441 49.7271 58.8005 46.9832C60.0569 44.2393 60.7794 41.3933 61.0148 38.5582L63.7365 38.7842C63.4753 41.9299 62.6736 45.0847 61.2837 48.1202C59.8937 51.1558 58.0292 53.8239 55.8183 56.0769ZM63.8304 36.1997L61.0994 36.2275C61.0396 30.3442 58.9148 24.6303 55.1163 20.1372L57.2019 18.3739C61.4111 23.3527 63.764 29.6804 63.8304 36.1997ZM55.4423 16.4787L53.5294 18.428C51.4989 16.4355 49.0924 14.7529 46.3486 13.4965C43.6047 12.2401 40.7586 11.5177 37.9235 11.2823L38.1495 8.56055C41.2953 8.82171 44.45 9.62342 47.4856 11.0134C50.5211 12.4033 53.1893 14.2678 55.4423 16.4787ZM35.5651 8.46667L35.5928 11.1976C29.7095 11.2575 23.9956 13.3822 19.5025 17.1808L17.7393 15.0951C22.7181 10.8859 29.0458 8.533 35.5651 8.46667ZM15.8441 16.8548C13.6332 19.1078 11.7687 21.7759 10.3787 24.8115C8.98878 27.847 8.18706 31.0018 7.9259 34.1475L10.6476 34.3735C10.883 31.5384 11.6055 28.6923 12.8619 25.9485C14.1183 23.2046 15.8009 20.7981 17.7934 18.7676L15.8441 16.8548ZM7.83203 36.732L10.563 36.7042C10.6228 42.5875 12.7476 48.3014 16.5461 52.7945L14.4605 54.5578C10.2513 49.579 7.89836 43.2513 7.83203 36.732ZM16.2201 56.453L18.133 54.5037C20.1635 56.4962 22.57 58.1788 25.3138 59.4352C28.0577 60.6915 30.9038 61.414 33.7388 61.6494L33.5129 64.3711C30.3671 64.11 27.2124 63.3083 24.1768 61.9183C21.1413 60.5284 18.4731 58.6638 16.2201 56.453ZM36.0973 64.465L36.0696 61.734C41.9529 61.6742 47.6668 59.5495 52.1599 55.7509L53.9231 57.8365C48.9443 62.0457 42.6166 64.3987 36.0973 64.465Z"
									fill="#343434"
								></path>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8206 56.0769L53.8712 54.1641C55.8638 52.1336 57.5464 49.7271 58.8027 46.9832C60.0591 44.2393 60.7816 41.3933 61.017 38.5582L63.7387 38.7842C63.4776 41.9299 62.6759 45.0847 61.2859 48.1202C59.896 51.1558 58.0314 53.8239 55.8206 56.0769ZM63.8326 36.1997L61.1016 36.2275C61.0418 30.3442 58.9171 24.6303 55.1185 20.1372L57.2041 18.3739C61.4133 23.3527 63.7663 29.6804 63.8326 36.1997ZM55.4445 16.4787L53.5316 18.428C51.5011 16.4355 49.0947 14.7529 46.3508 13.4965C43.6069 12.2401 40.7609 11.5177 37.9258 11.2823L38.1517 8.56055C41.2975 8.82171 44.4523 9.62342 47.4878 11.0134C50.5234 12.4033 53.1915 14.2678 55.4445 16.4787Z"
									fill="#505050"
								></path>
								<path
									d="M34.1559 32.6907V28.4667H38.5079V32.6907H34.1559ZM34.1559 44.4667V40.2427H38.5079V44.4667H34.1559Z"
									fill="#7E7E7E"
								></path>
							</svg>
						</div>
						<span className="block -translate-y-4 text-gray-400 md:hidden">
							:
						</span>
					</div>
					<div>
						<p className="flex flex-col items-center">
							{formatNumber(timeLeft.hours)}
							<br />
							<span className="text-gray-2 text-base">hours</span>
						</p>
					</div>
					<div>
						<div className="hidden -translate-y-2 md:block w-fit">
							<svg
								width="73"
								height="72"
								viewBox="0 0 73 72"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8183 56.0769L53.869 54.164C55.8615 52.1336 57.5441 49.7271 58.8005 46.9832C60.0569 44.2393 60.7794 41.3933 61.0148 38.5582L63.7365 38.7842C63.4753 41.9299 62.6736 45.0847 61.2837 48.1202C59.8937 51.1558 58.0292 53.8239 55.8183 56.0769ZM63.8304 36.1997L61.0994 36.2275C61.0396 30.3442 58.9148 24.6303 55.1163 20.1372L57.2019 18.3739C61.4111 23.3527 63.764 29.6804 63.8304 36.1997ZM55.4423 16.4787L53.5294 18.428C51.4989 16.4355 49.0924 14.7529 46.3486 13.4965C43.6047 12.2401 40.7586 11.5177 37.9235 11.2823L38.1495 8.56055C41.2953 8.82171 44.45 9.62342 47.4856 11.0134C50.5211 12.4033 53.1893 14.2678 55.4423 16.4787ZM35.5651 8.46667L35.5928 11.1976C29.7095 11.2575 23.9956 13.3822 19.5025 17.1808L17.7393 15.0951C22.7181 10.8859 29.0458 8.533 35.5651 8.46667ZM15.8441 16.8548C13.6332 19.1078 11.7687 21.7759 10.3787 24.8115C8.98878 27.847 8.18706 31.0018 7.9259 34.1475L10.6476 34.3735C10.883 31.5384 11.6055 28.6923 12.8619 25.9485C14.1183 23.2046 15.8009 20.7981 17.7934 18.7676L15.8441 16.8548ZM7.83203 36.732L10.563 36.7042C10.6228 42.5875 12.7476 48.3014 16.5461 52.7945L14.4605 54.5578C10.2513 49.579 7.89836 43.2513 7.83203 36.732ZM16.2201 56.453L18.133 54.5037C20.1635 56.4962 22.57 58.1788 25.3138 59.4352C28.0577 60.6915 30.9038 61.414 33.7388 61.6494L33.5129 64.3711C30.3671 64.11 27.2124 63.3083 24.1768 61.9183C21.1413 60.5284 18.4731 58.6638 16.2201 56.453ZM36.0973 64.465L36.0696 61.734C41.9529 61.6742 47.6668 59.5495 52.1599 55.7509L53.9231 57.8365C48.9443 62.0457 42.6166 64.3987 36.0973 64.465Z"
									fill="#343434"
								></path>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8206 56.0769L53.8712 54.1641C55.8638 52.1336 57.5464 49.7271 58.8027 46.9832C60.0591 44.2393 60.7816 41.3933 61.017 38.5582L63.7387 38.7842C63.4776 41.9299 62.6759 45.0847 61.2859 48.1202C59.896 51.1558 58.0314 53.8239 55.8206 56.0769ZM63.8326 36.1997L61.1016 36.2275C61.0418 30.3442 58.9171 24.6303 55.1185 20.1372L57.2041 18.3739C61.4133 23.3527 63.7663 29.6804 63.8326 36.1997ZM55.4445 16.4787L53.5316 18.428C51.5011 16.4355 49.0947 14.7529 46.3508 13.4965C43.6069 12.2401 40.7609 11.5177 37.9258 11.2823L38.1517 8.56055C41.2975 8.82171 44.4523 9.62342 47.4878 11.0134C50.5234 12.4033 53.1915 14.2678 55.4445 16.4787Z"
									fill="#505050"
								></path>
								<path
									d="M34.1559 32.6907V28.4667H38.5079V32.6907H34.1559ZM34.1559 44.4667V40.2427H38.5079V44.4667H34.1559Z"
									fill="#7E7E7E"
								></path>
							</svg>
						</div>
						<span className="block -translate-y-4 text-gray-400 md:hidden">
							:
						</span>
					</div>
					<div>
						<p className="flex flex-col items-center">
							{formatNumber(timeLeft.minutes)}
							<br />
							<span className="text-gray-2 text-base">mins</span>
						</p>
					</div>
					<div className="hidden md:block">
						<div className="hidden -translate-y-2 md:block w-fit">
							<svg
								width="73"
								height="72"
								viewBox="0 0 73 72"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8183 56.0769L53.869 54.164C55.8615 52.1336 57.5441 49.7271 58.8005 46.9832C60.0569 44.2393 60.7794 41.3933 61.0148 38.5582L63.7365 38.7842C63.4753 41.9299 62.6736 45.0847 61.2837 48.1202C59.8937 51.1558 58.0292 53.8239 55.8183 56.0769ZM63.8304 36.1997L61.0994 36.2275C61.0396 30.3442 58.9148 24.6303 55.1163 20.1372L57.2019 18.3739C61.4111 23.3527 63.764 29.6804 63.8304 36.1997ZM55.4423 16.4787L53.5294 18.428C51.4989 16.4355 49.0924 14.7529 46.3486 13.4965C43.6047 12.2401 40.7586 11.5177 37.9235 11.2823L38.1495 8.56055C41.2953 8.82171 44.45 9.62342 47.4856 11.0134C50.5211 12.4033 53.1893 14.2678 55.4423 16.4787ZM35.5651 8.46667L35.5928 11.1976C29.7095 11.2575 23.9956 13.3822 19.5025 17.1808L17.7393 15.0951C22.7181 10.8859 29.0458 8.533 35.5651 8.46667ZM15.8441 16.8548C13.6332 19.1078 11.7687 21.7759 10.3787 24.8115C8.98878 27.847 8.18706 31.0018 7.9259 34.1475L10.6476 34.3735C10.883 31.5384 11.6055 28.6923 12.8619 25.9485C14.1183 23.2046 15.8009 20.7981 17.7934 18.7676L15.8441 16.8548ZM7.83203 36.732L10.563 36.7042C10.6228 42.5875 12.7476 48.3014 16.5461 52.7945L14.4605 54.5578C10.2513 49.579 7.89836 43.2513 7.83203 36.732ZM16.2201 56.453L18.133 54.5037C20.1635 56.4962 22.57 58.1788 25.3138 59.4352C28.0577 60.6915 30.9038 61.414 33.7388 61.6494L33.5129 64.3711C30.3671 64.11 27.2124 63.3083 24.1768 61.9183C21.1413 60.5284 18.4731 58.6638 16.2201 56.453ZM36.0973 64.465L36.0696 61.734C41.9529 61.6742 47.6668 59.5495 52.1599 55.7509L53.9231 57.8365C48.9443 62.0457 42.6166 64.3987 36.0973 64.465Z"
									fill="#343434"
								></path>
								<path
									fillRule="evenodd"
									clipRule="evenodd"
									d="M55.8206 56.0769L53.8712 54.1641C55.8638 52.1336 57.5464 49.7271 58.8027 46.9832C60.0591 44.2393 60.7816 41.3933 61.017 38.5582L63.7387 38.7842C63.4776 41.9299 62.6759 45.0847 61.2859 48.1202C59.896 51.1558 58.0314 53.8239 55.8206 56.0769ZM63.8326 36.1997L61.1016 36.2275C61.0418 30.3442 58.9171 24.6303 55.1185 20.1372L57.2041 18.3739C61.4133 23.3527 63.7663 29.6804 63.8326 36.1997ZM55.4445 16.4787L53.5316 18.428C51.5011 16.4355 49.0947 14.7529 46.3508 13.4965C43.6069 12.2401 40.7609 11.5177 37.9258 11.2823L38.1517 8.56055C41.2975 8.82171 44.4523 9.62342 47.4878 11.0134C50.5234 12.4033 53.1915 14.2678 55.4445 16.4787Z"
									fill="#505050"
								></path>
								<path
									d="M34.1559 32.6907V28.4667H38.5079V32.6907H34.1559ZM34.1559 44.4667V40.2427H38.5079V44.4667H34.1559Z"
									fill="#7E7E7E"
								></path>
							</svg>
						</div>
						<span className="block -translate-y-4 text-gray-400 md:hidden">
							:
						</span>
					</div>
					<div className="hidden md:block">
						<p className="flex flex-col items-center">
							{formatNumber(timeLeft.seconds)}
							<br />
							<span className="text-gray-2 text-base">secs</span>
						</p>
					</div>
				</div>
				<div className="xl:before:content-plus-detail-2 xl:after:content-trophy relative xl:before:absolute xl:before:bottom-0 xl:before:left-20 xl:before:right-auto xl:after:absolute xl:after:-top-14 xl:after:right-44">
					<h2 className="font-tasa-orbiter-display mx-auto mb-9 mt-10 max-w-xs text-3xl font-semibold md:my-12 md:max-w-xl md:text-[2.5rem] md:leading-[3rem]">
						CodeLite 2.0 hackathon is starting soon.
					</h2>
					<div className="mb-[3.25rem]">
						<a
							className="font-nb-architekt rounded-[4px] uppercase bg-green-2 text-green-1 focus-within:outline-green-1 outline-none transition-all duration-300 ease-in-out focus-within:outline-offset-2 focus-within:brightness-150 hover:brightness-150 px-4 py-3 text-[14px] md:px-7 md:py-4 md:text-[18px]"
							href="https://arena.colosseum.org/signup"
						>
							Join{" "}
						</a>
					</div>
				</div>
			</div>
		</section>
	);
};

export default CountdownSection;
